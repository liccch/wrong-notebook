version: '3'

# 内置 HTTPS 版本 - 使用官方镜像

services:
  wrong-notebook:
    # 使用 GitHub 官方镜像
    image: ghcr.io/wttwins/wrong-notebook:latest

    container_name: wrong-notebook-prod
    restart: always

    ports:
      - "7001:443" # HTTPS 端口

    environment:
      # === 访问配置 ===
      - NEXTAUTH_URL=https://echobyte.cn:7001
      - NEXTAUTH_SECRET=supersecret-prod-secret-change-me-in-production
      - AUTH_TRUST_HOST=true

      # === HTTPS 配置 ===
      - HTTPS_ENABLED=true
      #- CERT_DOMAIN=echobyte.cn

    volumes:
      - ./data:/app/data
      - ./config:/app/config
      # 证书目录（自动生成或手动放入）
      - ./certs:/app/certs
